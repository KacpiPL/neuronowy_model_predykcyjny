<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>Iris Predictor</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 720px; margin: 32px auto; }
    form { display: grid; gap: 12px; grid-template-columns: 1fr 1fr; }
    label { display: flex; flex-direction: column; font-weight: 600; }
    input { padding: 8px; font-size: 14px; }
    button { grid-column: 1 / -1; padding: 10px 14px; font-size: 16px; cursor: pointer; }
    #out { margin-top: 16px; padding: 12px; border: 1px solid #ddd; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>Iris Predictor</h1>
  <form id="f">
    <label>Sepal length (4.3–7.9 cm)
      <input id="sepal_length" type="number" step="0.1" min="4.3" max="7.9" required>
    </label>
    <label>Sepal width (2.0–4.4 cm)
      <input id="sepal_width" type="number" step="0.1" min="2.0" max="4.4" required>
    </label>
    <label>Petal length (1.0–6.9 cm)
      <input id="petal_length" type="number" step="0.1" min="1.0" max="6.9" required>
    </label>
    <label>Petal width (0.1–2.5 cm)
      <input id="petal_width" type="number" step="0.1" min="0.1" max="2.5" required>
    </label>
    <button type="submit">Predict</button>
  </form>

  <h2>Result:</h2>
  <div id="out">Wynik pojawi się tutaj.</div>

  <script>
    const CLASS_NAMES = {0: "setosa", 1: "versicolor", 2: "virginica"};
    document.getElementById('f').addEventListener('submit', async (e) => {
      e.preventDefault();
      const payload = {
        sepal_length: parseFloat(document.getElementById('sepal_length').value),
        sepal_width: parseFloat(document.getElementById('sepal_width').value),
        petal_length: parseFloat(document.getElementById('petal_length').value),
        petal_width: parseFloat(document.getElementById('petal_width').value),
      };
      const r = await fetch('/predict', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload) });
      const j = await r.json();
      const pretty = `Klasa: ${j.predicted_class} (${CLASS_NAMES[j.predicted_class] || "?"})
Prawdopodobieństwa: ${j.probabilities.map(p=>p.toFixed(3)).join('  ')}`;
      document.getElementById('out').textContent = pretty;
    });
  </script>
</body>
</html>
